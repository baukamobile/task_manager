import{g as $,I as A,r as H,J as Q,b as R,e as r,f as I,m as e,v as i,F as g,K as f,j as n,M as C,G as d,N as M,O as W,B as X,P as Y,Q as Z,x as p,R as O,S as K,U as w}from"./index-DgFySzYa.js";import{u as _,s as h}from"./postcss-BgogK026.js";import{_ as c}from"./PageWrapper-BMp7S2xO.js";import"./tasks-Cz6Lq1lb.js";import"./index-C88pvD_q.js";var ll={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"};function z(m){for(var u=1;u<arguments.length;u++){var a=arguments[u]!=null?Object(arguments[u]):{},v=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(a).filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}))),v.forEach(function(b){el(m,b,a[b])})}return m}function el(m,u,a){return u in m?Object.defineProperty(m,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):m[u]=a,m}var S=function(u,a){var v=z({},u,a.attrs);return $(A,z({},v,{icon:ll}),null)};S.displayName="EditFilled";S.inheritAttrs=!1;const tl={class:"flex flex-col gap-4 md:flex-row md:items-center"},nl={class:"dashboard"},ol={class:"center"},sl=["onDrop"],rl={class:"status"},il={class:"status-name"},dl=["onClick"],ul=["onDragstart"],al={style:{display:"flex","justify-content":"space-between",gap:"8px"}},pl={style:{margin:"0"}},ml={style:{display:"flex"}},bl=["onClick"],vl={class:"time-part"},gl={class:"add-task-container"},fl=["onClick"],yl={key:0},kl=["value"],xl=["value"],Cl=["value"],wl=["onUpdate:modelValue","onChange"],$l=["value"],Vl={class:"add-list"},Dl=["value"],Tl={__name:"Index",setup(m){const{tasks:u,statuses:a,projects:v,users:b,newStatus:V,newTask:o,priority:U,handleClick:B,updateTask:E,handleClickTask:P,ondragstart:L,onDrop:q,formatDate:j,submitColumn:N,submitTask:G}=_(),D=H({}),J=y=>{D.value={...D.value,[y]:!D.value[y]}};return Q(()=>o,y=>{console.log("newtask изменился: ",JSON,h(y,null,2))},{deep:!0}),(y,l)=>(r(),R(c,null,{default:I(()=>[e("div",tl,[e("div",nl,[e("div",ol,[(r(!0),i(g,null,f(n(a),s=>(r(),i("div",{key:s.id,onDrop:t=>n(q)(t,s.id),class:"droppable",onDragover:l[16]||(l[16]=C(()=>{},["prevent"])),onDragenter:l[17]||(l[17]=C(()=>{},["prevent"]))},[e("div",rl,[e("h1",il,d(s.status_name),1),e("a",{class:"red-button",onClick:t=>n(B)(s.id)},[$(n(M),{style:{"font-size":"15px",color:"red",cursor:"pointer"}})],8,dl)]),$(W,{name:"fade"},{default:I(()=>[(r(!0),i(g,null,f(n(u).filter(t=>t.status==s.id),t=>{var k,T,F;return r(),i("div",{key:t.id,onDragstart:x=>n(L)(x,t),draggable:"true",class:"draggable"},[e("div",al,[e("p",pl,[X(d(t.task_name)+" ",1),e("span",{style:Y({color:(k=n(U)[t.priority])==null?void 0:k.color})}," ("+d(((T=n(U)[t.priority])==null?void 0:T.priority_name)||"Неизвестный")+") ",5)]),e("div",ml,[e("a",{onClick:C(x=>n(P)(t.id),["prevent"]),class:"delete-task"},[$(n(M),{style:{"font-size":"15px",color:"red",cursor:"pointer"}})],8,bl),$(n(S),{style:{"font-size":"15px",color:"green"},onClick:x=>n(E)(t)},null,8,["onClick"])])]),l[21]||(l[21]=e("button",{style:{color:"black"}},"Подробнее",-1)),e("div",vl,[e("p",null,"от "+d(n(j)(t.start_date)),1),e("p",null,"до "+d(n(j)(t.end_date)),1)]),e("p",null,d(t.description)+" "+d(((F=n(b).find(x=>x.id===t.assigned))==null?void 0:F.first_name)||"Неизвестно"),1)],40,ul)}),128))]),_:2},1024),e("div",gl,[e("a",{onClick:t=>J(s.id),href:"#",class:"add-task"},"Добавить Задачу",8,fl),D.value[s.id]?(r(),i("div",yl,[l[49]||(l[49]=e("h2",null,"Форма",-1)),e("form",{onSubmit:l[15]||(l[15]=C(t=>{console.log("Форма отправлена!"),n(G)()},["prevent"]))},[l[22]||(l[22]=e("label",{class:"label-name"},"Название:",-1)),p(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=t=>n(o).task_name=t),placeholder:"Название задачи",onInput:l[1]||(l[1]=t=>console.log("Название изменилось:",n(o).task_name)),required:""},null,544),[[O,n(o).task_name]]),l[23]||(l[23]=e("br",null,null,-1)),l[24]||(l[24]=e("br",null,null,-1)),l[25]||(l[25]=e("label",{class:"label-name"},"Описание:",-1)),p(e("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>n(o).description=t),placeholder:"Описание задачи",onInput:l[3]||(l[3]=t=>console.log("Название изменилось:",n(o).description)),required:""},null,544),[[O,n(o).description]]),l[26]||(l[26]=e("br",null,null,-1)),l[27]||(l[27]=e("br",null,null,-1)),l[28]||(l[28]=e("label",{class:"label-name"},"Прикрепить Файл: ",-1)),e("input",{type:"file",onInput:l[4]||(l[4]=t=>console.log("Название изменилось:",n(o).documents))},null,32),l[29]||(l[29]=e("br",null,null,-1)),l[30]||(l[30]=e("br",null,null,-1)),l[31]||(l[31]=e("label",{class:"label-name"},"Конец:",-1)),p(e("input",{type:"date","onUpdate:modelValue":l[5]||(l[5]=t=>n(o).end_date=t),onInput:l[6]||(l[6]=t=>console.log("end date",n(o).end_date))},null,544),[[O,n(o).end_date]]),l[32]||(l[32]=e("br",null,null,-1)),l[33]||(l[33]=e("br",null,null,-1)),l[34]||(l[34]=e("label",{class:"label-name"},"Согласовано с руководством:",-1)),p(e("input",{type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=t=>n(o).agreed_with_managers=t),onInput:l[8]||(l[8]=t=>console.log("Название изменилось:",n(o).agreed_with_managers))},null,544),[[K,n(o).agreed_with_managers]]),l[35]||(l[35]=e("br",null,null,-1)),l[36]||(l[36]=e("br",null,null,-1)),l[37]||(l[37]=e("label",{class:"label-name"},"Подписан с :",-1)),p(e("select",{id:"users","onUpdate:modelValue":l[9]||(l[9]=t=>n(o).assigned=t),onChange:l[10]||(l[10]=t=>console.log("assigned",n(o).assigned))},[(r(!0),i(g,null,f(n(b),t=>(r(),i("option",{key:t.id,value:Number(t.id)},d(t.first_name),9,kl))),128))],544),[[w,n(o).assigned]]),l[38]||(l[38]=e("br",null,null,-1)),l[39]||(l[39]=e("br",null,null,-1)),l[40]||(l[40]=e("label",{class:"label-name"},"Название проекта:",-1)),p(e("select",{"onUpdate:modelValue":l[11]||(l[11]=t=>n(o).projects=t),onChange:l[12]||(l[12]=t=>console.log("project",n(o).projects))},[(r(!0),i(g,null,f(n(v),t=>(r(),i("option",{key:t.id,value:t.id},d(t.project_name),9,xl))),128))],544),[[w,n(o).projects]]),l[41]||(l[41]=e("br",null,null,-1)),l[42]||(l[42]=e("br",null,null,-1)),l[43]||(l[43]=e("label",{for:""},"Приоритет",-1)),p(e("select",{"onUpdate:modelValue":l[13]||(l[13]=t=>n(o).priority=t),onChange:l[14]||(l[14]=t=>console.log("priorty",n(o).priority))},[(r(!0),i(g,null,f(n(U),(t,k)=>(r(),i("option",{key:k,value:k},d(t.priority_name),9,Cl))),128))],544),[[w,n(o).priority]]),l[44]||(l[44]=e("br",null,null,-1)),l[45]||(l[45]=e("br",null,null,-1)),p(e("select",{id:"users","onUpdate:modelValue":t=>n(o).status=t,onChange:t=>console.log("status",n(o).status)},[(r(!0),i(g,null,f(n(a),t=>(r(),i("option",{key:t.id,value:t.id},d(t.status_name),9,$l))),128))],40,wl),[[w,n(o).status]]),l[46]||(l[46]=e("br",null,null,-1)),l[47]||(l[47]=e("br",null,null,-1)),l[48]||(l[48]=e("button",{type:"submit "},"Добавить",-1))],32)])):Z("",!0)])],40,sl))),128)),e("div",Vl,[l[52]||(l[52]=e("h2",null,"Добавить колонку",-1)),e("form",{onSubmit:l[20]||(l[20]=C((...s)=>n(N)&&n(N)(...s),["prevent"]))},[p(e("input",{"onUpdate:modelValue":l[18]||(l[18]=s=>n(V).status_name=s),placeholder:"Название колонки",required:""},null,512),[[O,n(V).status_name]]),e("div",null,[l[50]||(l[50]=e("label",{for:"users"},"Сотрудник:",-1)),p(e("select",{id:"users","onUpdate:modelValue":l[19]||(l[19]=s=>n(V).user=s)},[(r(!0),i(g,null,f(n(b),s=>(r(),i("option",{key:s.id,value:Number(s.id)},d(s.first_name)+" "+d(s.last_name)+" "+d(s.department?s.department.department_name:"No department"),9,Dl))),128))],512),[[w,n(V).user]])]),l[51]||(l[51]=e("button",{type:"submit"},"Добавить",-1))],32)])])])])]),_:1}))}};export{Tl as default};
