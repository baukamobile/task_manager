import{r as z,J as E,q as K,b as L,e as r,f as V,m as n,v as u,F as a,K as p,j as e,M as v,g as N,G as d,B as S,O as P,P as Q,Q as R,x as i,R as y,S as A,U as g}from"./index-DPn4F_J5.js";import{u as H,s as W}from"./postcss-DcwIs9Db.js";import{_ as X}from"./PageWrapper-CDERYdjS.js";import"./tasks-Cz6Lq1lb.js";import"./index-C88pvD_q.js";const Y={class:"flex flex-col gap-4 md:flex-row md:items-center"},Z={class:"dashboard"},_={class:"center"},h=["onDrop"],c={class:"status"},ll={class:"status-name"},nl=["onDragstart"],tl={style:{}},el={class:"time-part"},ol=["onClick"],sl={class:"add-task-container"},rl=["onClick"],ul={key:0},dl=["value"],il=["value"],al=["value"],pl=["onUpdate:modelValue","onChange"],ml=["value"],bl={class:"add-list"},vl=["value"],$l={__name:"reports",setup(gl){const{tasks:M,statuses:$,projects:j,users:w,newStatus:k,newTask:o,priority:C,handleClick:B,handleClickTask:q,ondragstart:F,onDrop:I,formatDate:x,submitColumn:U,submitTask:G}=H(),f=z({}),J=m=>{f.value={...f.value,[m]:!f.value[m]}};return E(()=>o,m=>{console.log("newtask изменился: ",JSON,W(m,null,2))},{deep:!0}),(m,l)=>{const O=K("a-button");return r(),L(X,null,{default:V(()=>[n("div",Y,[n("div",Z,[n("div",_,[(r(!0),u(a,null,p(e($),s=>(r(),u("div",{key:s.id,onDrop:t=>e(I)(t,s.id),class:"droppable",onDragover:l[16]||(l[16]=v(()=>{},["prevent"])),onDragenter:l[17]||(l[17]=v(()=>{},["prevent"]))},[n("div",c,[n("h1",ll,d(s.status_name),1),N(O,{class:"red-button",onClick:t=>e(B)(s.id)},{default:V(()=>l[21]||(l[21]=[S("Удалить колонку")])),_:2},1032,["onClick"])]),N(P,{name:"fade"},{default:V(()=>[(r(!0),u(a,null,p(e(M).filter(t=>t.status==s.id),t=>{var b,D;return r(),u("div",{key:t.id,onDragstart:T=>e(F)(T,t),draggable:"true",class:"draggable"},[n("div",tl,[n("p",null,[S(d(t.task_name)+" ",1),n("span",{style:Q({color:(b=e(C)[t.priority])==null?void 0:b.color})}," ("+d(((D=e(C)[t.priority])==null?void 0:D.priority_name)||"Неизвестный")+") ",5)]),l[22]||(l[22]=n("button",{style:{color:"black"}},"Подробнее",-1))]),n("div",el,[n("p",null,"от "+d(e(x)(t.start_date)),1),n("p",null,"до "+d(e(x)(t.end_date)),1)]),n("a",{onClick:v(T=>e(q)(t.id),["prevent"]),class:"delete-task"},"Удалить",8,ol)],40,nl)}),128))]),_:2},1024),n("div",sl,[n("a",{onClick:t=>J(s.id),href:"#",class:"add-task"},"Добавить Задачу",8,rl),f.value[s.id]?(r(),u("div",ul,[l[50]||(l[50]=n("h2",null,"Форма",-1)),n("form",{onSubmit:l[15]||(l[15]=v(t=>{console.log("Форма отправлена!"),e(G)()},["prevent"]))},[l[23]||(l[23]=n("label",{class:"label-name"},"Название:",-1)),i(n("textarea",{"onUpdate:modelValue":l[0]||(l[0]=t=>e(o).task_name=t),placeholder:"Название задачи",onInput:l[1]||(l[1]=t=>console.log("Название изменилось:",e(o).task_name)),required:""},null,544),[[y,e(o).task_name]]),l[24]||(l[24]=n("br",null,null,-1)),l[25]||(l[25]=n("br",null,null,-1)),l[26]||(l[26]=n("label",{class:"label-name"},"Описание:",-1)),i(n("input",{"onUpdate:modelValue":l[2]||(l[2]=t=>e(o).description=t),placeholder:"Описание задачи",onInput:l[3]||(l[3]=t=>console.log("Название изменилось:",e(o).description)),required:""},null,544),[[y,e(o).description]]),l[27]||(l[27]=n("br",null,null,-1)),l[28]||(l[28]=n("br",null,null,-1)),l[29]||(l[29]=n("label",{class:"label-name"},"Прикрепить Файл: ",-1)),n("input",{type:"file",onInput:l[4]||(l[4]=t=>console.log("Название изменилось:",e(o).documents))},null,32),l[30]||(l[30]=n("br",null,null,-1)),l[31]||(l[31]=n("br",null,null,-1)),l[32]||(l[32]=n("label",{class:"label-name"},"Конец:",-1)),i(n("input",{type:"date","onUpdate:modelValue":l[5]||(l[5]=t=>e(o).end_date=t),onInput:l[6]||(l[6]=t=>console.log("end date",e(o).end_date))},null,544),[[y,e(o).end_date]]),l[33]||(l[33]=n("br",null,null,-1)),l[34]||(l[34]=n("br",null,null,-1)),l[35]||(l[35]=n("label",{class:"label-name"},"Согласовано с руководством:",-1)),i(n("input",{type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=t=>e(o).agreed_with_managers=t),onInput:l[8]||(l[8]=t=>console.log("Название изменилось:",e(o).agreed_with_managers))},null,544),[[A,e(o).agreed_with_managers]]),l[36]||(l[36]=n("br",null,null,-1)),l[37]||(l[37]=n("br",null,null,-1)),l[38]||(l[38]=n("label",{class:"label-name"},"Подписан с :",-1)),i(n("select",{id:"users","onUpdate:modelValue":l[9]||(l[9]=t=>e(o).assigned=t),onChange:l[10]||(l[10]=t=>console.log("assigned",e(o).assigned))},[(r(!0),u(a,null,p(e(w),t=>(r(),u("option",{key:t.id,value:Number(t.id)},d(t.first_name),9,dl))),128))],544),[[g,e(o).assigned]]),l[39]||(l[39]=n("br",null,null,-1)),l[40]||(l[40]=n("br",null,null,-1)),l[41]||(l[41]=n("label",{class:"label-name"},"Название проекта:",-1)),i(n("select",{"onUpdate:modelValue":l[11]||(l[11]=t=>e(o).projects=t),onChange:l[12]||(l[12]=t=>console.log("project",e(o).projects))},[(r(!0),u(a,null,p(e(j),t=>(r(),u("option",{key:t.id,value:t.id},d(t.project_name),9,il))),128))],544),[[g,e(o).projects]]),l[42]||(l[42]=n("br",null,null,-1)),l[43]||(l[43]=n("br",null,null,-1)),l[44]||(l[44]=n("label",{for:""},"Приоритет",-1)),i(n("select",{"onUpdate:modelValue":l[13]||(l[13]=t=>e(o).priority=t),onChange:l[14]||(l[14]=t=>console.log("priorty",e(o).priority))},[(r(!0),u(a,null,p(e(C),(t,b)=>(r(),u("option",{key:b,value:b},d(t.priority_name),9,al))),128))],544),[[g,e(o).priority]]),l[45]||(l[45]=n("br",null,null,-1)),l[46]||(l[46]=n("br",null,null,-1)),i(n("select",{id:"users","onUpdate:modelValue":t=>e(o).status=t,onChange:t=>console.log("status",e(o).status)},[(r(!0),u(a,null,p(e($),t=>(r(),u("option",{key:t.id,value:t.id},d(t.status_name),9,ml))),128))],40,pl),[[g,e(o).status]]),l[47]||(l[47]=n("br",null,null,-1)),l[48]||(l[48]=n("br",null,null,-1)),l[49]||(l[49]=n("button",{type:"submit "},"Добавить",-1))],32)])):R("",!0)])],40,h))),128)),n("div",bl,[l[53]||(l[53]=n("h2",null,"Добавить колонку",-1)),n("form",{onSubmit:l[20]||(l[20]=v((...s)=>e(U)&&e(U)(...s),["prevent"]))},[i(n("input",{"onUpdate:modelValue":l[18]||(l[18]=s=>e(k).status_name=s),placeholder:"Название колонки",required:""},null,512),[[y,e(k).status_name]]),n("div",null,[l[51]||(l[51]=n("label",{for:"users"},"Сотрудник:",-1)),i(n("select",{id:"users","onUpdate:modelValue":l[19]||(l[19]=s=>e(k).user=s)},[(r(!0),u(a,null,p(e(w),s=>(r(),u("option",{key:s.id,value:Number(s.id)},d(s.first_name)+" "+d(s.last_name)+" "+d(s.department?s.department.department_name:"No department"),9,vl))),128))],512),[[g,e(k).user]])]),l[52]||(l[52]=n("button",{type:"submit"},"Добавить",-1))],32)])])])])]),_:1})}}};export{$l as default};
